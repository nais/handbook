{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"A handbook of sorts","text":""},{"location":"#where-we-will-cover-the-parts-unique-to-us-and-therefore-werent-covered-during-onboarding","title":"Where we will cover the parts \"unique\" to us and therefore weren't covered during onboarding.","text":"<p>Nais is a complex animal - and if you are new to the team there will be quite a few things that are all but obvious and apparent. The technical documentation is comprehensive but hardly describes how we function as a team. This handbook is an attempt at bringing some of the silent knowledge to an audible frequency, and at the very least guide you through the bare essentials. To get you started we recommend that you familiarize yourself with our manifest. The guiding principles that define the how, the what, and the why we do the things that we do. </p> <p>So now that have you have memorized the manifest and documentation we can get into it all.</p>"},{"location":"administrative/fixtures/","title":"Fixtures","text":"<p>The NAIS team might look disorganised to a newcomer and in a certain sense of the word this holds true. However there are a few fixtures in place to ensure a certain degree of synchronisation, consensus and progression.</p>"},{"location":"administrative/fixtures/#froom","title":"Froom","text":"<p>Thanks to COVID19 we have become \"remote first only\". And in case you are wondering; The froom is our zoom based digital workspace. Froom is a portmanteau of Frode and Zoom. Frode is a popular guy, so his personal Zoom space was where we all gravitated.</p> <p>We all hang out in the lobby and join breakout rooms for more in-depth exploration of topics that may not be of general interest. Anyone is welcome anywhere but \"good manners\" apply. Make your presence known when joining and if you sense that you will be interupting trains of thought or coding flow, come back later or use Slack instead. The froom url is posted in the topic here. </p> <p>All meeting fixtures are held in The froom as well as ad-hoc and sceduled meetings with third parties.</p> <p>Any and all meetings that are deemed unnecessary due to priority or lack of substance are swiftly cancelled and we all go back to [insert task].</p>"},{"location":"administrative/fixtures/#weekly","title":"Weekly","text":"<p>The NAIS weekly takes place Monday at high noon.</p>"},{"location":"administrative/fixtures/#friday-demo","title":"Friday Demo","text":"<p>Friday Demo is held most Fridays and invites are distributed (make some noise if you don't get one).  This is an informal \"show &amp; tell\" where any new feature or initative is introduced to the larger \"service platform\" grouping.  And when we say informal - we mean informal.  A rudimentry drawing will do - the idea is to keep everyone abreast of what's going on. You can have your demo added to the agenda or you can present on the fly.</p>"},{"location":"administrative/fixtures/#retro","title":"Retro","text":"<p>Retros are held on \"a need to relieve pressure\" basis. You will get an invite if one is scheduled. If you feel that one is needed or have topics you want to address let our esteemed product owner know. </p>"},{"location":"administrative/fixtures/#pig-meetings","title":"PIG-meetings","text":"<ul> <li>Utvikleropplevelse (developer experience) takes place every other Thursday at 11:30. </li> <li>Kubeops is normally Thursday mornings at 09:00 but not reccurring - invites are sent to interested parties a few days in advance.</li> <li>Aiven is a biweekly thing - Friday mornings at 09:00.</li> <li>Deploy come together Wednesdays from 12:00-13:00.</li> <li>Security (Sikkerhet) runs with the obscurity principle and won't say...</li> </ul>"},{"location":"administrative/fixtures/#anchor-forum","title":"Anchor-forum","text":"<p>Every Friday the big-wigs (aka \"PIG-Anchors\") meet up for a light session of trello grooming so we have tasks ripe for the picking come \"Weekly\" the following monday.</p>"},{"location":"administrative/pigs/","title":"PlatformInterestGroup (PIG)","text":""},{"location":"administrative/pigs/#nais-has-organized-the-various-areas-we-work-with-in-interest-groups","title":"NAIS has organized the various areas we work with in interest groups.","text":""},{"location":"administrative/pigs/#why","title":"Why?","text":"<p>PIGs are a mechanism for scaling the team. They enable all members of the NAIS team to tune their degree of involvement adjusted to capacity and interest, without splitting up into smaller, more static teams.</p> <p>They ensure ownership, management, and further development of the products the NAIS team are responsible for.</p> <p>They provide us with a forum for subject matter discussions that are narrowed down to the PIG's domain.</p> <p>They enable people outside the NAIS team (our users) to get involved in working with their own platform.</p> <p>The PIG concept is inspired by Kubernetes SIG</p>"},{"location":"administrative/pigs/#what-is-an-anchor","title":"What is an anchor?","text":"<p>Anchors act as a product owner for the products and services included in the PIG. They keep tabs on how the products are experienced and work for the users. They follow the relevant channels, pick up on problems and wishes from users, and ensure that these are addressed in the PIG.</p> <p>Anchors are responsible for ensuring that cases that arise are investigated and end up in a priority order in the (trello board) column for things #TODO. This is often done by consensuses reached in the PIG meetings, but can also be done by both anchors and other members where it is natural.</p> <p>A prioritization of investigated tasks should take into account (but not exclusively) the following aspects:</p> <ul> <li>How critical is it?</li> <li>Is it a high value, low hanging fruit?</li> <li>Is it in line with the roadmap?</li> <li>How does it affect the quality of the services we offer?</li> </ul> <p>If important tasks remain unhandled due to a lack of capacity in the PIG, it is the anchors' responsibility to inform the NAIS team about this so that we can process this at team level.</p> <p>Anchors are responsible for arranging PIG meetings at an appropriate frequency. If there is a lot of activity in the PIG, it is natural to have weekly meetings, while if there is less, it may hold bi-weekly meetings or only ad-hoc meetings if needed. All meetings should have a notice with an agenda in advance and a minute. In this way, it is easy for everyone in the NAIS team to make an independent assessment of whether this is a meeting you should attend, or whether you can rather work with tasks and initiatives.</p> <p>Since a PIG is a cooperation forum for a given area, much of the work in a PIG will therefore take place locally. It is therefore important that the PIGs communicate openly and ensure that notices, meeting minutes, discussions, designs, decisions, and ADRs are available to others. Keeping these \"interfaces\" as similar as possible across PIGs makes it easier for everyone to consume, as they will be more predictable.</p> <p>Anchors also share a status with the rest of the team on a weekly basis. This should contain a summary of the most important things that have happened in the previous week, and what will happen in the PIG in the future so that the whole team is a little in sync on what is moving.</p>"},{"location":"administrative/pigs/#how-are-tasks-distributed","title":"How are tasks distributed?","text":"<p>The team members pick the tasks they have the opportunity to contribute to. Each team member is responsible for finding tasks that motivate them, building their own calendar Tetris and otherwise disposing of their time as is best for their situation.</p> <p>One should try to pick the tasks that have been prepared and prioritized, but there are examples where this does not make sense - and that is fine.</p> <p>Where possible, we try to have at least two team members on most tasks - though sometimes it's nice to do things alone too.</p> <p>We avoid starting new things if we can help to complete already ongoing tasks instead. This applies both to those you yourself are actively involved in, and where you see that someone on the team can benefit from your contribution. Fewer context changes and more focus.</p>"},{"location":"administrative/slack/","title":"Slack","text":""},{"location":"administrative/slack/#we-do-not-want-to-leave-anyone-out-but-invites-and-inclusion-can-sometimes-fall-between-the-cracks","title":"We do not want to leave anyone out but invites and inclusion can sometimes fall between the cracks.","text":"<p>Here is a list of Slack channels you might want to join (or in some cases should be in). If you haven't been invited to a private channel listed here let your sponsor know.  </p>"},{"location":"administrative/slack/#private-channels","title":"Private Channels","text":"<p><code>#nais-internal</code></p> <p><code>#naisdevice-internal</code></p>"},{"location":"administrative/slack/#public-channels","title":"Public Channels","text":"<p><code>#nais</code></p> <p><code>#naisdevice</code></p> <p><code>#nais-announcements</code></p>"},{"location":"administrative/trello/","title":"Trelloboards","text":""},{"location":"administrative/trello/#pick-a-task","title":"\"pick a task\"","text":"<p>NAIS</p> <p>deployment</p> <p>sikkerhet (security)</p> <p>kubeops</p> <p>utvikleropplevelse (developer experience)</p> <p>aiven</p> <p>datadeling (data sharing)</p>"},{"location":"social/the-great-outdoors/","title":"Social","text":""},{"location":"social/the-great-outdoors/#all-work-and-no-play-makes-nais-a-dull-platform","title":"\"All work and no play makes NAIS a dull platform\"","text":""},{"location":"social/the-great-outdoors/#native-naisians","title":"Native NAISians","text":""},{"location":"social/the-great-outdoors/#the-nais-pole","title":"The NAIS Pole","text":""},{"location":"technical/development/","title":"How we develop NAIS","text":"<p>Do one thing, and do it well - Unix philosophy</p> <p>NAIS is made up by a number of components, each has their own repository and release cycle. This document describes how we develop NAIS.</p>"},{"location":"technical/development/#general-nais-namespaces","title":"General NAIS namespaces","text":"<p>Over the years we have a number of namespaces that we use for different purposes. The most important ones are:</p> Name Description Status <code>nais</code> Team namespace for NAIS (example) application Some what deprecated <code>nais-system</code> Current namespace for NAIS components Active <code>nais-verification</code> Test applications for verifying NAIS with alerts Active"},{"location":"technical/development/#special-namespaces","title":"Special namespaces","text":"<p>Some namespaces are special and should not be used for NAIS components.</p> Name Description Owner <code>default</code> Default namespace Kubernetes Kubernetes <code>kube-system</code> Kubernetes system namespace Kubernetes <code>kube-public</code> Kubernetes public namespace Kubernetes <code>cnrm-system</code> Cloud Native Resource Manager Google <code>configconnector-operator-system</code> Cloud Native Resource Manager Google <code>kyverno</code> Only Kyverno is allowed in here NAIS"},{"location":"technical/development/#other-namespaces","title":"Other namespaces","text":"<p>There are some other NAIS-related namespaces, but they are documented in NAIS Teams</p>"},{"location":"technical/development/#deprecated-namespaces","title":"Deprecated namespaces","text":"<p>These namespaces are deprecated and should not be used for new components.</p> Name Description Status <code>aura</code> Previous namespace for Aura components Deprecated <code>nginx</code> Previous namespace for nginx ingress controller Deprecated <code>plattformsikkerhet</code> Previous namespace for plattformsikkerhet components Deprecated"},{"location":"technical/installing-nais/","title":"Installing nais","text":"<p>Installing nais in your own cluster is a complicated process, where few or no steps are documented. This document is an attempt to give a short introduction and describe a few of the initial steps to get you started.</p> <p>Keep in mind that nais is a big ball of interconnected services and infrastructure, and as of now there isn't any clear guide for how to install and operate it on your own. </p> <p>Most of the required knowledge for installing nais in a cluster is tribal knowledge in the nais team, but we're a friendly bunch, so you can always ask us for more information.</p>"},{"location":"technical/installing-nais/#the-absolute-minimum","title":"The absolute minimum","text":"<p>The bare minimum needed in a cluster would be the CRDs and Naiserator, but that alone would probably only give you a very rudimentary \"nais cluster\". CRDs are installed with the chart in the liberator repo. Naiserator is probably best to install using the chart in the naiserator repo.</p> <p>There are quite a few values to adjust in those charts, with very little documentation on what each does. We don't have any better option than trying them out or tracing their use in the code to understand them more.</p>"},{"location":"technical/installing-nais/#deploying-applications","title":"Deploying applications","text":"<p>The next step you might want to install is the deploy system, which consists of a hookd instance available from anywhere you would like to deploy from (Github, local machine, etc), and a deployd instance running in the clusters you wish to deploy to. Deployd in the cluster needs to be able to reach hookd (the cluster doesn't need to be directly on the internet, as long as deployd can call out to hookd). Deploying is done using the deploy cli (or the deploy github actions), which takes some inputs and sends them to hookd, which forwards to deployd in the selected cluster, which applies the manifests in the cluster.</p> <p>See the user documentation for details about deploying applications.</p>"},{"location":"technical/installing-nais/#integrations","title":"Integrations","text":"<p>A complete nais experience requires that all the integrated services are available, but most of these are not documented. Some of them also require various infrastructure to be in place and work in a certain way, which is also not documented.</p> <p>Here are some components you might want to look at, although some of these may contain NAV specific code that wouldn't work outside our clusters.</p> <p>Documentation on each is also limited:</p> <ul> <li>CNRM for integration with several GCP features</li> <li>Kafkarator, Aivenator and Mutilator for integration with a few Aiven services (Kafka, OpenSearch, InfluxDB and Redis)</li> <li>BQrator for BigQuery integration</li> <li>Azurerator for automated registration and lifecycle management of Azure Active Directory applications.</li> <li>Digdirator for automated registration and lifecycle management of ID-porten and Maskinporten clients (integrations) with feature Maskinporten Scopes (APIS).</li> <li>Console frontend and backend which contains a dashboard and overview for teams.</li> <li>Teams frontend and backend which allows management of teams and namespaces.</li> </ul> <p>This is a very quick, high-level introduction, but for now it's all we have \ud83d\ude05</p>"},{"location":"technical/nais/","title":"What is NAIS?","text":"<p>Kubernetes is not just Kubernetes. How did we set it up, and what does NAIS do (nais-yaml, GitHub actions, workflows, etc.)?</p> <p>Kubernetes is a Swiss army knife of tools, and each of these tools comes with its own set of instructions. NAIS is there to help developers utilize these tools without having to read (all) the manual(s). </p>"},{"location":"technical/nais/#naisyaml","title":"nais.yaml","text":"<p>Each of the many components that make up Kubernetes is configured via resource definitions. What we've done in NAIS, is to select what we consider to be the most relevant components and condense their configuration in to a common yaml-file: nais.yaml.</p>"},{"location":"technical/nais/#deployment","title":"Deployment","text":"<p>Through a single yaml-file, the users of the platform should be able to configure and set up everything their application needs. (see deploy for more info)</p>"},{"location":"technical/nais/#observability","title":"Observability","text":"<p>Once an application is running on the platform, the developer of that application should be equipped with everything they need to care for their application. The primary tools for this is logs, metrics and alerts.</p>"},{"location":"technical/nais/#operators","title":"Operators","text":"<p>Even though Kubernetes comes with a lot of features out of the box, there are capabilities we want to add on top, such as databases, token authorization or kafka. We want to give our users a uniform way of expressing their application's needs, so all additional functionality is added to nais.yaml, but there are different operators in the clusters that handle different parts of the manifest. For most things concerning default kubernetes resources, naiserator will handle the business, but most other features have their own dedicated operator.</p> <p>A \"brief history\" of NAIS and the current status quo is available on the fron page of our documentation.</p>"},{"location":"technical/nais/#setup-kubeconfig-as-a-nais-team-member","title":"Setup kubeconfig as a NAIS team member","text":"<p>If you are a member of the NAIS team, you can use the following command to set up your kubeconfig:</p> <pre><code>nais naas kubeconfig --tenant '*' --include-management\n</code></pre>"},{"location":"technical/production-ready/","title":"What is production ready?","text":"<p>This is the NAIS team's attempt to define what production ready means to us. Production implies quality and durability. Running a system means serving requests, and requests are ultimately serving users. We care about our users, thus we must care about our systems.</p> <p>At NAIS, we strive to:</p> <ul> <li>provide fully self serviced products with minimal downtime,</li> <li>be confident that code changes will not break existing functionality,</li> <li>respond quickly when systems fail,</li> <li>spend minimal time fixing errors,</li> <li>and most importantly: spend as much time possible implementing useful services for our users. (you!)</li> </ul> <p>We believe that if our systems conform to the principles in this document, we have a greater chance of achieving these goals.</p>"},{"location":"technical/production-ready/#12-factor-app","title":"12 factor app","text":"<p>Write your application according to the principles of 12 factor apps.</p> <p>Twelve factor apps:</p> <ul> <li>have declarative system requirements,</li> <li>are suitable for deployment in Docker containers,</li> <li>do not have differences between development and production, and</li> <li>can scale up without significant changes to tooling, architecture, or development practices.</li> </ul>"},{"location":"technical/production-ready/#observability","title":"Observability","text":"<p>Expose a Prometheus metric endpoint to allow scraping of key application metrics.</p>"},{"location":"technical/production-ready/#measuring-success","title":"Measuring success","text":"<p>Figure out service level indicators (SLI) and service level objectives (SLO).</p> <p>Service level indicators are quantifying metrics such as error rate, request latency, availability, and system throughput.</p> <p>Service level objectives are targets values for your metrics. You might say that you want an uptime of 99.9%. How do you define uptime? Is it a sufficiently low error rate? Is it being able to serve requests within a reasonable amount of time?</p> <p>Implement SLIs in the application code. Create views in a Grafana dashboard to check up on SLOs.</p> <p>Recommended read: Service Level Objectives in the Google Site Reliability Engineering handbook.</p>"},{"location":"technical/production-ready/#alerts","title":"Alerts","text":"<p>Alerts should be tied to SLOs. Consider if alerting is at all needed. An alert should only fire if human intervention is required. Too many alerts going off will result in alarm fatigue.</p>"},{"location":"technical/production-ready/#relevant-logs","title":"Relevant logs","text":"<p>Ensure traceability of errors by logging sufficient amount of debug information. Do not include sensitive data in logs. Sensitive data include credentials and personally identifyable information.</p>"},{"location":"technical/production-ready/#tests","title":"Tests","text":"<p>Ensure sufficient test coverage so that the next developer is not afraid of breaking things when updating your code.</p>"},{"location":"technical/production-ready/#documentation","title":"Documentation","text":"<ul> <li>Development/building</li> <li>End-user documentation</li> <li>Sysadmin/maintenance</li> <li>Document code where it is complex, hard to read, or otherwise obscure</li> </ul>"},{"location":"technical/production-ready/#continuous-integration","title":"Continuous Integration","text":"<p>Ensure that changes to the codebase are built automatically, and pushed to development and production environments. No manual steps other than <code>git push</code> should be neccessary.</p>"},{"location":"technical/production-ready/#publish-and-announce","title":"Publish and announce","text":"<p>Your system is not in production until it has users. Make sure all potential end users are aware of your system and can use it. Using a system means making requests and having access to support and documentation.</p>"},{"location":"technical/production-ready/#decrease-bus-factor","title":"Decrease bus factor","text":"<p>Ensure that at least two people on your team have sufficient knowledge to debug and work on the system, to avoid bus factor.</p>"},{"location":"technical/production-ready/#data-protection-impact-assessment","title":"Data Protection Impact Assessment","text":"<p>Perform, if applicable, a Data Protection Impact Assessment (or in Norwegian, personvernskonsekvensvurdering (PVK)).</p>"},{"location":"technical/production-ready/#security-audit","title":"Security Audit","text":"<p>Perform a security audit (ROS) before releasing to production.</p>"},{"location":"technical/publications-media/","title":"Publications &amp; Media","text":""},{"location":"technical/publications-media/#seasoned-adventurers-giving-back","title":"Seasoned adventurers - giving back","text":"<p>Our work is in large part driven by and on open source solutions and thanks to the sharing of others we enjoy a faster pace and more robust infrastructure than one might otherwise expect. With that in mind, we do try to contribute with content that describe topics and experiences that have been or are of significance. Being a public service we also try to share through talks, conferences and interactions with other government bodies and the developer community in general. Here is a collection of the past &amp; present.</p>"},{"location":"technical/publications-media/#write-ups","title":"Write ups","text":"<p>NAIS blog</p>"},{"location":"technical/publications-media/#presentations","title":"Presentations","text":"<ul> <li> <p>Using Kubernetes to Change Legacy Systems and Processes in the Public Sector </p> </li> <li> <p>Experiences From Running Istio in a K8s Production Environment </p> </li> <li> <p>NAIS applikasjonsplattform</p> </li> <li> <p>Continious Monitoring</p> </li> <li> <p>Hva kjennetegner en moderne applikasjonsplattform?</p> </li> </ul>"},{"location":"welcome/fadder/","title":"Checklist for faddere","text":"<ul> <li>Medlemsskap i AD-grupper (nais, nada, nais-analyse)</li> <li>Intro til og medlemsskap i Trello-tavler (nais, PIGer)</li> <li>Innf\u00f8ring i PIGer (github.com/navikt/pig) og hvordan vi jobber med dette</li> <li>Medlemsskap i teamkanaler (#nais-internal, #nada-internal)</li> <li>Oppdatere teamkatalogen</li> <li>Arrangere \"onboarding\"/introrunde med oppgaver i ulike PIGer</li> </ul>"},{"location":"welcome/nais-manifest-eng/","title":"NAIS is a AAAA rated platform service","text":"<p>The As represent these qualities:</p> <ul> <li>Autogenous: produced independently of external influence or aid</li> <li>Advantageous: involving or creating favourable circumstances that increase the chances of success or effectiveness.</li> <li>Automatic: working by itself with little or no direct human control.</li> <li>Accountable: required or expected to justify actions or decisions.</li> </ul>"},{"location":"welcome/nais-manifest-eng/#what-is-nais-for","title":"What is NAIS for?","text":"<p>The NAIS platform is there for the development teams, and aims to offer the best conditions for developing quality welfare services for the Norwegian population. We do this by offering solid products that solve real problems at scale. The products are based on technology the nais team believes are technologically sustainable. By using the platform's products and following the platform standards, the teams can focus on solving high value challenges rather than underlying nuts and bolts. The two most important drivers for the further evolution of the platform are technological developments and the needs of the teams.</p>"},{"location":"welcome/nais-manifest-eng/#what-motivates-us","title":"What motivates us?","text":""},{"location":"welcome/nais-manifest-eng/#social-mission","title":"Social mission","text":"<p>We contribute to an important societal mission by developing and maintaining a platform that relieves developers and helps product teams succeed.</p>"},{"location":"welcome/nais-manifest-eng/#colleagues","title":"Colleagues","text":"<p>We have a good working environment with a positive energy consisting of colleagues who have the independence, passion, competence and will needed to solve our mission.</p>"},{"location":"welcome/nais-manifest-eng/#autonomy","title":"Autonomy","text":"<p>We have a great degree of freedom both as individuals and as a team. Within our assignment, we as a team choose which challenges we want to focus on and how we will solve these. As members of the team, we choose which tasks we want to participate in. This gives us a varied day to day life, and ownership of the things we work on.</p>"},{"location":"welcome/nais-manifest-eng/#technology","title":"Technology","text":"<p>At NAIS, we try to always choose the best tool for the job. We have a low threshold for experimentation, and are not afraid to ditch stuff that doesn't work. We take the advice of seasoned adventurers, but at the same time know that we can only make technology choices after building hands-on experience with the alternatives.</p>"},{"location":"welcome/nais-manifest-eng/#what-are-we-optimizing-for","title":"What are we optimizing for?","text":"<ul> <li> <p>Development speed</p> </li> <li> <p>A first class developer experience</p> </li> <li> <p>Easy to build secure applications</p> </li> <li> <p>Easy to operate applications</p> </li> <li> <p>Good ergonomics</p> </li> <li> <p>Keep pace with new technology</p> </li> </ul>"},{"location":"welcome/nais-sponsor/","title":"NAIS-Sponsor","text":""},{"location":"welcome/nais-sponsor/#it-takes-a-village-to-raise-a-nais-developer","title":"It takes a village to raise a NAIS-developer","text":"<p>For your NAIS-specific onboarding you will be guided by not only one sponsor, but you will be attached to the hip of every anchor so that you can gain insight into every as many aspects of NAIS as possible. When you have the general gist of things and feel ready you can just start picking tasks off the board(s).</p> <p>Not only the anchors are your sponsors. Every member of the team is - and you should not be apologetic or hold back in terms of reaching out to \"whomever\" because we have no higher priority than that you settle in and find joy and accomplishment with us. You can also attach yourself to anyone that you feel might shed more light on a topic you want to explore further.</p> <p>So if you find yourself wondering about something - keep this in mind: It is our duty (not to mention in our own best interest) to make sure you have the tools and understanding that you need so imagine that this Cronjob is run on the team every minute. </p> <pre><code>* * * * * sed -i 's/stoopid question//g'\n</code></pre>"}]}